@model List<CitaViewModel>
@{
    ViewData["Title"] = "ListarCitas";
}

<nav class="navbar navbar-expand-lg navbar-light bg-light  mb-5">
    <a class="navbar-brand" href="#"><img src="../images/logoangelashealth.png" style="width: 130px" /></a>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="#">Nosotros</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="#">Especialidades</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="#">Doctores</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="#">Ayuda</a>
            </li>
        </ul>
        <button class="btn btn-secondary my-2 my-sm-0 m-1">Cerrar Sesión</button>
        <i class="fa-solid fa-user m-2" style="font-size:37px"></i>
    </div>
</nav>

<div class="mt-5">
    <h1 class="text-center mb-4">Historial de Citas</h1>
    @for (int i = Model.Count - 1; i >= 0; i--)
    {
        <div class="card mb-4 shadow-lg">
            <div class="card-header bg-primary text-white">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <h4 class="mb-0">Cita Médica</h4>
                    </div>
                    <div class="col-md-3 text-md-end text-center">
                        <span class="badge bg-info fs-6">Estado: @Model[i].EstadoCita</span>
                    </div>
                    <div class="col-md-3 text-md-end text-center">
                        <span class="badge bg-light text-dark fs-6">Fecha: @Model[i].FechaCita.Substring(0, 8)</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-9">
                        <p><strong>Hora Programada:</strong> @Model[i].HoraCita</p>
                        <p><strong>Doctor:</strong> @Model[i].idDoctor</p>
                        <p><strong>Especialidad:</strong> @Model[i].idEspecialidad</p>
                    </div>
                    <div class="col-3">

                        <div class="row">
                            <a asp-action="PagarCita" asp-controller="Cita" asp-route-id="@Model[i].IdCita" class="btn btn-primary m-1" style="width:200px">Pagar Cita</a>
                        </div>
                        <div class="row">
                            <a asp-action="AplazarCita" asp-controller="Cita" asp-route-id="@Model[i].IdCita" class="btn btn-primary m-1" style="width:200px">Aplazar Cita</a>
                        </div>
                        <div class="row">
                            <a asp-action="CancelarCita" asp-controller="Cita" asp-route-id="@Model[i].IdCita" class="btn btn-primary m-1" style="width:200px">Cancelar Cita</a>
                        </div>
                        <div class="row">
                            <a asp-action="ValorarCita" asp-controller="Cita" asp-route-id="@Model[i].IdCita" class="btn btn-primary m-1" style="width:200px">Valorar Cita</a>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    }
</div>
